(function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else if(typeof exports==="object"){e(require("jquery"))}else{e(jQuery)}})(function($){function Slidizle(e,t){this.settings={classes:{content:"slidizle-content",next:"slidizle-next",previous:"slidizle-previous",forward:"forward",backward:"backward",navigation:"slidizle-navigation",timer:"slidizle-timer",slide:"slidizle-slide",disabled:"disabled",first:"first",last:"last",play:"played",pause:"paused",stop:"stoped",slider:"slidizle",active:"active",loading:"loading"},timeout:null,pauseOnHover:false,nextOnClick:false,loop:false,autoPlay:true,keyboardEnabled:true,touchEnabled:true,loadBeforeTransition:true,disabled:false,onInit:null,onClick:null,beforeChange:null,onChange:null,afterChange:null,beforeLoading:null,onLoading:null,afterLoading:null,onNext:null,onPrevious:null,onPlay:null,onPause:null,onResume:null};this.$refs={slider:null,content:null,medias:null,nextMedia:null,previousMedia:null,currentMedia:null,navigation:null,next:null,previous:null,current:null,timer:null};this.loadingProgress=0;this.current_timeout_time=0;this._internalTimer=null;this.timeout=null;this.previous_index=0;this.current_index=0;this.next_index=0;this._previous_active_index=0;this._isPlaying=false;this._isPause=false;this._isOver=false;this.total=0;this.$this=$(e);this.clickEvent=navigator.userAgent.match(/mobile/gi)?"touchend":"click";this.init($(e),t)}Slidizle.prototype.init=function(e,t){var n=this,r=e;if(!r.hasClass(n.settings.classes.slider))r.addClass(n.settings.classes.slider);n._extendSettings(t);n.$refs.slider=r;n.$refs.content=r.find("[data-slidizle-content]").filter(function(){return $(this).closest("[data-slidizle]").get(0)==n.$this.get(0)});n.$refs.navigation=r.find("[data-slidizle-navigation]").filter(function(){return $(this).closest("[data-slidizle]").get(0)==n.$this.get(0)});n.$refs.previous=r.find("[data-slidizle-previous]").filter(function(){return $(this).closest("[data-slidizle]").get(0)==n.$this.get(0)});n.$refs.next=r.find("[data-slidizle-next]").filter(function(){return $(this).closest("[data-slidizle]").get(0)==n.$this.get(0)});n.$refs.timer=r.find("[data-slidizle-timer]").filter(function(){return $(this).closest("[data-slidizle]").get(0)==n.$this.get(0)});if(n.$refs.content)n.$refs.content.addClass(n.settings.classes.content);if(n.$refs.next)n.$refs.next.addClass(n.settings.classes.next);if(n.$refs.previous)n.$refs.previous.addClass(n.settings.classes.previous);if(n.$refs.navigation)n.$refs.navigation.addClass(n.settings.classes.navigation);if(n.$refs.timer)n.$refs.timer.addClass(n.settings.classes.timer);var i=n.$refs.content.children(":first-child");if(i.length>0){var s=i[0]["nodeName"].toLowerCase();n.$refs.medias=n.$refs.content.children(s)}r.addClass(n.settings.classes.slider);if(n.$refs.medias){n.$refs.medias.addClass(n.settings.classes.slide);n.$refs.medias.bind(n.clickEvent,function(e){r.trigger("slidizle.click",[n]);if(n.settings.onClick)n.settings.onClick(n)});n.total=n.$refs.medias.length;n.current_index=0;if(n.$refs.navigation.length>=1)n._initNavigation();n.initPreviousNextNavigation();var o=n.$refs.medias.filter(".active:first");if(o.length>=1){n.current_index=o.index()}n._updateSlidesRefs();if(n.settings.pauseOnHover){r.hover(function(e){n._isOver=true;n.pause()},function(e){n._isOver=false;n.resume()})}if(n.settings.keyboardEnabled&&n.settings.keyboardEnabled!="false")n._initKeyboardNavigation();if(n.settings.touchEnabled&&navigator.userAgent.match(/mobile/gi))n._initTouchNavigation();if(n.settings.autoPlay&&n.$refs.medias.length>1)n.play();if(n.settings.nextOnClick){n.$refs.content.bind("click",function(){n.next()})}if(n.settings.onInit)n.settings.onInit(n);r.trigger("slidizle.init",[n]);n.$this.addClass(n.settings.classes.forward);n._changeMedias()}else{if(n.settings.onInit)n.settings.onInit(n);r.trigger("slidizle.init",[n])}};Slidizle.prototype._initNavigation=function(){var e=this,t=e.$this;if(!e.$refs.navigation)return false;if(e.$refs.navigation.children().length<=0){var n=e.$refs.navigation[0]["nodeName"].toLowerCase(),r=n=="dl"?"dt":n=="ol"?"li":n=="ul"?"li":"div";for(var i=0;i<e.total;i++){e.$refs.navigation.append("<"+r+">"+(i+1)+"</"+r+">")}}e.$refs.navigation.children().bind(e.clickEvent,function(t){var n=$(this),r=n.attr("data-slidizle-slide-id"),i=e.$refs.medias.filter('[data-slidizle-slide-id="'+r+'"]');e.previous_index=e.current_index;if(r&&i){var s=i.index();if(s!=e.current_index){e.current_index=s;e._changeMedias()}}else{if($(this).index()!=e.current_index){e.current_index=$(this).index();e._changeMedias()}}t.preventDefault()})};Slidizle.prototype._initKeyboardNavigation=function(){var e=this,t=e.$this;$(document).bind("keyup",function(t){switch(t.keyCode){case 39:e.next();break;case 37:e.previous();break}})};Slidizle.prototype._initTouchNavigation=function(){var e=this,t=e.$this,n,r;$(document).bind("touchstart",function(e){n=e.originalEvent.touches[0].clientX;r=e.originalEvent.touches[0].clientY});$(document).bind("touchmove",function(t){if(!n||!r)return;var i=t.originalEvent.touches[0].clientX,s=t.originalEvent.touches[0].clientY,o=n-i,u=r-s;if(Math.abs(o)>Math.abs(u)){if(o>0){e.next()}else{e.previous()}}n=r=null})};Slidizle.prototype.initPreviousNextNavigation=function(){var e=this,t=e.$this;if(e.$refs.previous){if(e.total>1)e.$refs.previous.bind(e.clickEvent,function(){e.previous()});if(e.total<=1)e.$refs.previous.hide()}if(e.$refs.next){if(e.total>1)e.$refs.next.bind(e.clickEvent,function(){e.next()});if(e.total<=1)e.$refs.next.hide()}};Slidizle.prototype._pauseTimer=function(){var e=this;clearInterval(e._internalTimer)};Slidizle.prototype._stopTimer=function(){var e=this;clearInterval(e._internalTimer);e._resetTimer()};Slidizle.prototype._resetTimer=function(){var e=this;e.current_timeout_time=e.$refs.currentMedia.data("slidizle-timeout")||e.settings.timeout;e.total_timeout_time=e.$refs.currentMedia.data("slidizle-timeout")||e.settings.timeout};Slidizle.prototype._startTimer=function(){var e=this,t=e.$this;clearInterval(e._internalTimer);e._internalTimer=setInterval(function(){e.current_timeout_time-=10;if(e.current_timeout_time<=0){e.next()}},10)};Slidizle.prototype._changeMedias=function(){function i(){if(e.$refs.previousActiveMedia)e.$this.removeClass("loaded-slide-"+e.$refs.previousActiveMedia.index());e.$this.addClass("loaded-slide-"+e.$refs.currentMedia.index());e.$refs.medias.removeClass(e.settings.classes.active);e.$refs.currentMedia.addClass(e.settings.classes.active);if(e.settings.onChange)e.settings.onChange(e);t.trigger("slidizle.change",[e]);if(e.$refs.currentMedia.index()==0&&e.$refs.previousMedia){if(e.$refs.previousMedia.index()==e.$refs.medias.length-1){if(e.settings.onNext)e.settings.onNext(e);t.trigger("slidizle.next",[e])}else{if(e.settings.onPrevious)e.settings.onPrevious(e);t.trigger("slidizle.previous",[e])}}else if(e.$refs.currentMedia.index()==e.$refs.medias.length-1&&e.$refs.previousMedia){if(e.$refs.previousMedia.index()==0){if(e.settings.onPrevious)e.settings.onPrevious(e);t.trigger("slidizle.previous",[e])}else{if(e.settings.onNext)e.settings.onNext(e);t.trigger("slidizle.next",[e])}}else if(e.$refs.previousMedia){if(e.$refs.currentMedia.index()>e.$refs.previousMedia.index()){if(e.settings.onNext)e.settings.onNext(e);t.trigger("slidizle.next",[e])}else{if(e.settings.onPrevious)e.settings.onPrevious(e);t.trigger("slidizle.previous",[e])}}else{if(e.settings.onNext)e.settings.onNext(e);t.trigger("slidizle.next",[e])}if(e.getTotalTimeout()&&!e._isOver&&e.isPlay())e._startTimer();if(e.settings.afterChange)e.settings.afterChange(e);t.trigger("slidizle.afterChange",[e])}var e=this,t=e.$this,n=e.settings.classes.disabled;e._updateSlidesRefs();if(e.settings.beforeChange)e.settings.beforeChange(e);t.trigger("slidizle.beforeChange",[e]);e._stopTimer();if(e.$refs.next){if(e.isLast()&&!e.isLoop()){e.$refs.next.addClass(n)}else{if(e.$refs.next.hasClass(n))e.$refs.next.removeClass(n)}}if(e.$refs.previous){if(e.$refs.previous&&e.isFirst()&&!e.isLoop()){e.$refs.previous.addClass(n)}else{if(e.$refs.previous.hasClass(n))e.$refs.previous.removeClass(n)}}var r=e.$refs.currentMedia.attr("data-slidizle-slide-id");e.$refs.navigation.each(function(){var t=$(this),n=$(this).children('[data-slidizle-slide-id="'+r+'"]');if(r&&n){t.children().removeClass(e.settings.classes.active);n.addClass(e.settings.classes.active)}else{t.children().removeClass(e.settings.classes.active);t.children(":eq("+e.current_index+")").addClass(e.settings.classes.active)}});if(e.$refs.previousActiveMedia)e.$this.removeClass("slide-"+e.$refs.previousActiveMedia.index());e.$this.addClass("slide-"+e.$refs.currentMedia.index());if(e.isLast())e.$this.addClass(e.settings.classes.last);else e.$this.removeClass(e.settings.classes.last);if(e.isFirst())e.$this.addClass(e.settings.classes.first);else e.$this.removeClass(e.settings.classes.first);e.$refs.slider.addClass(e.settings.classes.loading);e.$refs.currentMedia.addClass(e.settings.classes.loading);if(!e.settings.loadBeforeTransition||e.settings.loadBeforeTransition=="false"){i()}else{if(e.settings.beforeLoading)e.settings.beforeLoading(e);t.trigger("slidizle.beforeLoading",[e]);e._loadSlide(e.$refs.currentMedia,function(n){n.removeClass(e.settings.classes.loading);e.$refs.slider.removeClass(e.settings.classes.loading);if(e.settings.afterLoading)e.settings.afterLoading(e);t.trigger("slidizle.afterLoading",[e]);i()})}};Slidizle.prototype._updateSlidesRefs=function(){var e=this,t=e.$this;var n=e.current_index||0,r=e.next_index||e.current_index+1<e.total?e.current_index+1:0,i=e.previous_index||e.current_index-1>=0?e.current_index-1:e.total-1;if(e.$refs.currentMedia)e.$refs.previousActiveMedia=e.$refs.currentMedia;e.$refs.previousMedia=e.$refs.content.children(":eq("+i+")");e.$refs.currentMedia=e.$refs.content.children(":eq("+n+")");e.$refs.nextMedia=e.$refs.content.children(":eq("+r+")")};Slidizle.prototype._loadSlide=function(e,t){function a(){o++;n.loadingProgress=100/s.length*o;if(n.settings.onLoading)n.settings.onLoading(n);r.trigger("slidizle.onLoading",[n]);if(o>=s.length)t(i)}var n=this,r=n.$this,i=$(e),s=[],o=0;var u=i.find("*:not(script)").filter(function(){return $(this).closest("[data-slidizle]").get(0)==n.$this.get(0)});u=u.add(i);u.each(function(){var e=$(this),t;if(typeof e.attr("data-slidizle-preload-custom")!="undefined"&&e.attr("data-slidizle-preload-custom")!==false){s.push({type:"custom",$elm:e});return}if(e.css("background-image").indexOf("none")==-1){var n=e.css("background-image");if(n.indexOf("url")!=-1){var r=n.match(/url\((.*?)\)/);t=r[1].replace(/\"/g,"")}}else if(e.get(0).nodeName.toLowerCase()=="img"&&typeof e.attr("src")!="undefined"){t=e.attr("src")}if(!t)return;s.push({type:"image",url:t})});if(!s.length){t(i);return}$(s).each(function(e,t){switch(t.type){case"image":var n=new Image;$(n).load(function(){a()}).error(function(){a()}).attr("src",t.url);break;case"custom":t.$elm.bind("slidizle.loaded",function(e){a()});break}});n.loadingProgress=0};Slidizle.prototype.play=function(){var e=this,t=e.$this;if(e.isDisabled())return;if(e._isPlaying||!e.getTotalTimeout()||!e.$refs.medias.length)return;e.$this.removeClass(e.settings.classes.pause);e.$this.removeClass(e.settings.classes.stop);e.$this.addClass(e.settings.classes.play);e._isPause=false;e._isPlaying=true;e._resetTimer();e._startTimer();if(e.settings.onPlay)e.settings.onPlay(e);t.trigger("slidizle.play",[e])};Slidizle.prototype.resume=function(){var e=this,t=e.$this;if(e.isDisabled())return;if(!e.isPause())return;e.$this.removeClass(e.settings.classes.pause);e.$this.removeClass(e.settings.classes.stop);e.$this.addClass(e.settings.classes.play);e._startTimer();e._isPause=false;e._isPlaying=true;if(e.settings.onResume)e.settings.onResume(e);t.trigger("slidizle.resume",[e])};Slidizle.prototype.pause=function(){var e=this,t=e.$this;if(e.isDisabled())return;if(!e.isPlay())return;e.$this.removeClass(e.settings.classes.play);e.$this.removeClass(e.settings.classes.stop);e._isPause=true;e._isPlaying=false;e._pauseTimer();e.$this.addClass(e.settings.classes.pause);if(e.settings.onPause)e.settings.onPause(e);t.trigger("slidizle.pause",[e])};Slidizle.prototype.stop=function(){var e=this,t=e.$this;if(e.isDisabled())return;if(!e.isPlay())return;e.$this.removeClass(e.settings.classes.play);e.$this.removeClass(e.settings.classes.pause);e._isPause=false;e._isPlaying=false;e._stopTimer();e.$this.addClass(e.settings.classes.stop);if(e.settings.onStop)e.settings.onStop(e);t.trigger("slidizle.stop",[e])};Slidizle.prototype.togglePlayPause=function(){var e=this,t=e.$this;if(e.isDisabled())return;if(e._isPlaying)e.pause();else e.play()};Slidizle.prototype.next=function(){var e=this,t=e.$this,n=e.settings.classes.disabled;if(e.isDisabled())return;if(!e.isLoop()&&e.isLast())return;e.$this.removeClass(e.settings.classes.backward);e.$this.addClass(e.settings.classes.forward);e._previous_active_index=e.current_index;e.current_index=e.current_index+1<e.total?e.current_index+1:0;e.previous_index=e.current_index-1>=0?e.current_index-1:e.total-1;e.next_index=e.current_index+1<e.total?e.current_index+1:0;e._changeMedias()};Slidizle.prototype.previous=function(){var e=this,t=e.$this;if(e.isDisabled())return;if(!e.isLoop()&&e.isFirst())return;e.$this.removeClass(e.settings.classes.forward);e.$this.addClass(e.settings.classes.backward);e._previous_active_index=e.current_index;e.current_index=e.current_index-1<0?e.total-1:e.current_index-1;e.previous_index=e.current_index-1>=0?e.current_index-1:e.total-1;e.next_index=e.current_index+1<e.total?e.current_index+1:0;e._changeMedias()};Slidizle.prototype.goto=function(e){var t=this,n=t.$this,r=null;if(t.isDisabled())return;if(typeof e=="string"){if(e.substr(0,1)=="."||e.substr(0,1)=="#"){r=t.$refs.content.children(e)}else{var i=t.$refs.medias.filter('[data-slidizle-slide-id="'+e+'"]');if(i.length==1){r=i}else if(t.$refs.medias.filter("#"+e).length==1){r=t.$refs.medias.filter("#"+e)}}}else if(typeof e=="number"){r=t.$refs.medias.filter(":eq("+e+")")}if(r&&r.index()!=null){t.current_index=r.index();t._changeMedias()}};Slidizle.prototype.gotoAndPlay=function(e){if(this.isDisabled())return;this.gotoSlide(e);this.play()};Slidizle.prototype.gotoAndStop=function(e){if(this.isDisabled())return;this.gotoSlide(e);this.stop()};Slidizle.prototype.getCurrentSlide=function(){return this.$refs.currentMedia};Slidizle.prototype.getPreviousSlide=function(){return this.$refs.previousMedia};Slidizle.prototype.getNextSlide=function(){return this.$refs.nextMedia};Slidizle.prototype.getPreviousActiveSlide=function(){return this.$refs.previousActiveMedia};Slidizle.prototype.getAllSlides=function(){return this.$refs.medias};Slidizle.prototype.getSettings=function(){return this.settings};Slidizle.prototype.getLoadingProgress=function(){return this.loadingProgress};Slidizle.prototype.getRemainingTimeout=function(){return this.current_timeout_time};Slidizle.prototype.getCurrentTimeout=function(){var e=this.$refs.currentMedia.data("slidizle-timeout")||this.settings.timeout;if(!e)return null;return e-this.current_timeout_time};Slidizle.prototype.getTotalTimeout=function(){return this.total_timeout_time||this.settings.timeout||false};Slidizle.prototype.isLast=function(){return this.getCurrentSlide().index()>=this.getAllSlides().length-1};Slidizle.prototype.isFirst=function(){return this.getCurrentSlide().index()<=0};Slidizle.prototype.isHover=function(){return this._isOver};Slidizle.prototype.isDisabled=function(){var e=false;if(typeof this.settings.disabled=="function")e=this.settings.disabled();else e=this.settings.disabled;if(e)this.$this.addClass(this.settings.classes.disabled);else this.$this.removeClass(this.settings.classes.disabled);return e};Slidizle.prototype.isLoop=function(){var e=this.settings.loop;return e&&e!="false"};Slidizle.prototype.isPlay=function(){return this._isPlaying};Slidizle.prototype.isPause=function(){return this._isPause};Slidizle.prototype.isStop=function(){return!this._isPlaying&&!this._isPause};Slidizle.prototype._extendSettings=function(options){var _this=this,$this=_this.$this;_this.settings=$.extend(_this.settings,options,true);var flattenObject=function(e){var t={};for(var n in e){if(!e.hasOwnProperty(n))continue;if(typeof e[n]=="object"&&e[n]!=null){var r=flattenObject(e[n]);for(var i in r){if(!r.hasOwnProperty(i))continue;t[n+"."+i]=r[i]}}else{t[n]=e[n]}}return t};var flatSettings=flattenObject(_this.settings);for(var name in flatSettings){var inline_setting="slidizle-"+name.replace(".","-").replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),inline_attr=$this.data(inline_setting);if(typeof inline_attr!=="undefined"){if(typeof inline_attr=="number"||typeof inline_attr=="boolean")eval("_this.settings."+name+" = "+inline_attr);else eval("_this.settings."+name+' = "'+inline_attr+'"')}}};$.fn.slidizle=function(e){if(Slidizle.prototype[e]){var t=Array.prototype.slice.call(arguments,1);this.each(function(){var n=$(this).data("slidizle_api");n[e].apply(n,t)})}else if(typeof e=="object"||!e){var t=Array.prototype.slice.call(arguments);this.each(function(){$this=$(this);if($this.data("slidizle_api")!=null&&$this.data("slidizle_api")!="")return;var e=new Slidizle($this,t[0]);$this.data("slidizle_api",e)})}else{$.error("Method "+e+" does not exist on jQuery.slidizle")}return this};return Slidizle})